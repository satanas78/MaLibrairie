(this["webpackJsonpreact-gsheet-crud"]=this["webpackJsonpreact-gsheet-crud"]||[]).push([[0],{112:function(e,t){},229:function(e,t,n){},245:function(e,t){},247:function(e,t){},291:function(e,t){},293:function(e,t){},302:function(e,t){},304:function(e,t){},329:function(e,t){},331:function(e,t){},332:function(e,t){},337:function(e,t){},339:function(e,t){},358:function(e,t){},370:function(e,t){},373:function(e,t){},422:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(221),s=n.n(r),o=(n(229),n(23)),i=n(12),l=n(0),u=function(){return Object(l.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark mb-5",children:Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)(o.b,{className:"navbar-brand",to:"/",children:"CRUD Google Sheet library"}),Object(l.jsx)("div",{children:Object(l.jsx)("ul",{className:"navbar-nav ms-auto mb-2 mb-lg-0",children:Object(l.jsx)("li",{className:"nav-item mt-1",children:Object(l.jsx)(o.b,{className:"btn btn-primary btn-sm",to:"/add",children:"Add"})})})})]})})},b=n(2),m=n.n(b),j=n(13),d=n(33),h=n(224),p=n(223),f="1xw1u6aNjRzWYsn36GScv3K8hY-KVM2RRRcvQBzGXffA",x="0",O="334842323",v="googlesheetapi@xenon-chain-365516.iam.gserviceaccount.com",g="-----BEGIN PRIVATE KEY-----\nMIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQCymYnhgDcsq/Py\nbE8Kz7StHSxTaVRsNhhmkpT4Gm9d0pYynEjRw+jmPGdTxvU8kcNDentLvjbydJ/g\nM3apvkvjorPy1PlXfE6lkiRRUgZHZjQwoWN7CEdgnhoAX7/nh4n0PfrEqh4kW9ok\nfzhk7ApT8cj3eLiDz/jcA/mlDo1ZwCbbWmWrO74tfTrPKmBgAuXopf/65ZUzxEJ+\nboJAWDBNnw0aDwy+S2hdJa1ksRsI1aRTWg0QiCOpdR5qrrnUSPzynDKdmukH7UNX\nMzGD6yYwJ6+P3z8MPBEDG75qlhSkSg72ar1jO4ypJUZgM0opKTinYWP4AHhwfe9j\nFysv7mH9AgMBAAECggEABFQXn7Z6yoNfBdi9ewFDsLph8PeUNeHYajan6PIYZt62\nsy1PJSj+rlh3wfOyzS//L9XPwoCEARD12vou/bgrS1i4dxcq9TAsZnOJ8R/wH6+I\nw5ugYe1LxY9aCU5IxAoTPC8lsmR+bIUpXp8StSd0rJ98g7rnmzzhcXugg5vnAxjM\nZTWHBPw8dRgqXXq2NiTqICJiezKVccs5+j/19qEJSKvnUue3QRe3BbsKvS2J/4pW\n0a6AEB5h01mDUdYdkDP0Aa/bFcGc1z2n1rVOrU+2F4QC4PIlCa2HFGfVz2V3IFYA\nnNikJRY++9R/GwCZgthIIPsU+/OvaXgwrVwpo7pQRQKBgQDZnIQj/GmkqYSfKQKU\nZYa8nNwfg9+rBNeVLvJSd5F0R95wZXrb85t1u/ND1nxSQAbKrYvpSAJlslmohUAS\npLVirtGezgMn4ew8xXeuJFKbx41Ku4tETkWVP/uMndoSvjZBMGRKPWheGxXLL4Xz\nZfH/cvHE0y8t/f8c3t6YSCcQkwKBgQDSGzrLB20GcYzsL7uk8Yvb+lAXHe+686pB\ng9LB0kkjpso6y57bL1G/yaQ72o712NFDe5RfbQK3L3bK8MB3NjV/B812KdiO4qkC\n23k1Q8+mvSZWfeFwsntid+yjLRKirRun6/fIxo+jV0p7UxvShvg1S1e4OlxhTyea\nVr3dp5WtLwKBgHihpTb1s/KN7nD0oPN2nIxuQDBQQGtjkcancbl5gu588LhJ6SOJ\nFcLcX+xZOC24RIuSTR8SxhFuHvmmdHBhUhPUaWupNGKlgPnnVYL5q7mjk5W8BWXm\nJfiosV+wGbWOMDFPDCmDhRm11gz+2TimaNJ8+71qfJr4VLXCbo7oYI91AoGADsHA\n2F+2JZy2FCSqHkSk2Rd0ppsAqnXQwHc8x0Y4wttFGuoQRz7ElB7afSW1osjOsdmt\nKyKh7THVOx27tuPE0B5BLQp1XlvHGR9HHRmdLQ3d8nc27U5r4hegNDnHNEvKRHoL\nVjuz/Pn1jkHhE2FNb5jSGWtn76G6m1l6TmYl2hsCgYBGt54gXo3xvUcK3PLRubXI\nesHDEb/yHd35O06xwOFyBX7fUpWa2nlKC0c5Iwf6G0iyQcClZEtyKmGf5VM9VIOp\nbkLnihObREpPQ2cMyLpTWsdpvUtcis7+ISnvgDVKA/3hgSquwNggtEQKEvEq1S4Y\ntT68QinqcZpTZoa4L5KAqg==\n-----END PRIVATE KEY-----\n",N={Name:"",Author:"",Description:"",Jacket:"",Genre:"",SousGenre:"",Statut:"Non lu",Format:"",Tome:"",Commentaire:"",NbPages:"",LentTo:"",LentOn:"",LentReturnOn:""},k={genres:[],sousGenres:[],statuts:[],formats:[]},w=function(){var e=new p.GoogleSpreadsheet(f),t=!1,n=null,a=null,c={},r=function(){var r=Object(j.a)(m.a.mark((function r(){var s,o;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=17;break}return console.log("Initialisation de l'api"),r.next=4,e.useServiceAccountAuth({client_email:v,private_key:g});case 4:return r.next=6,e.loadInfo();case 6:return n=e.sheetsById[x],r.next=9,n.getRows();case 9:return a=r.sent,console.log("book count="+a.length),s=e.sheetsById[O],r.next=14,s.getRows();case 14:o=r.sent,c={genres:o.filter((function(e){return void 0!==e.Genre})).map((function(e){return e.Genre})),sousGenres:o.filter((function(e){return void 0!==e.SousGenre})).map((function(e){return e.SousGenre})),statuts:o.filter((function(e){return void 0!==e.Statut})).map((function(e){return e.Statut})),formats:o.filter((function(e){return void 0!==e.Format})).map((function(e){return e.Format}))},t=!0;case 17:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return{getBooks:function(){var e=Object(j.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:return e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getBook:function(){var e=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:return e.abrupt("return",a[t]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBookCount:function(){var e=Object(j.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:return e.abrupt("return",a.length);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),saveBook:function(){var e=Object(j.a)(m.a.mark((function e(t,n){var c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:for(s in c=a[t],n)c[s]=n[s];return e.next=6,c.save();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addBook:function(){var e=Object(j.a)(m.a.mark((function e(t){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r();case 3:return e.next=5,n.addRow(t);case 5:c=e.sent,a=[].concat(Object(h.a)(a),[c]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),getLists:function(){var e=Object(j.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:return e.abrupt("return",c);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),defaultState:N,defaultList:k}}(),y=function(){var e=Object(a.useState)(),t=Object(d.a)(e,2),n=t[0],c=t[1],r=function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getBooks();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){r()}),[]);var s=function(){var e=Object(j.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://sheet.best/api/sheets/bff990d0-8ada-43e9-97eb-0ad668bb19ec/".concat(t),{method:"DELETE"});case 3:e.sent.ok&&(a=n.filter((function(e,n){return n!==t})),c(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsx)("div",{className:"accordion",id:"accordionExample",children:null===n||void 0===n?void 0:n.map((function(e,t){return Object(l.jsxs)("div",{className:"accordion-item",children:[Object(l.jsx)("h2",{className:"accordion-header",id:"heading".concat(t),children:Object(l.jsxs)("button",{className:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse".concat(t),"aria-expanded":"true","aria-controls":"collapse".concat(t),children:[Object(l.jsx)("img",{src:e.Jacket||"https://img.freepik.com/premium-vector/book-cover-transparent-background-also-includes_270215-78.jpg?w=740",height:"50",width:"30",alt:"no-pic"})," ",e.Name," ",e.Author]})}),Object(l.jsx)("div",{id:"collapse".concat(t),className:"accordion-collapse collapse","aria-labelledby":"heading".concat(t),"data-bs-parent":"#accordionExample",children:Object(l.jsxs)("div",{className:"accordion-body",children:[Object(l.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(l.jsxs)("span",{children:[Object(l.jsx)("strong",{className:"display-6",children:e.Name})," ---"," ",e.Author]}),Object(l.jsxs)("span",{children:[Object(l.jsx)(o.b,{to:"/edit/".concat(t),style:{textDecoration:"none"},children:"Edit"}),Object(l.jsx)("button",{className:"btn btn-sm btn-danger ms-1",onClick:function(){return s(t)},children:"X"})]})]}),Object(l.jsx)("p",{children:e.Description}),Object(l.jsx)("img",{src:e.Jacket,alt:e.name})]})})]},t)}))})},S=n(50),A=n(51),C=function(e){var t=e.props,n=t.data,a=t.lists,c=t.handleChange;return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)("label",{htmlFor:"Name",className:"form-label",children:"Titre du livre"}),Object(l.jsx)("input",{type:"text",className:"form-control",name:"Name",value:n.Name,onChange:c})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)("label",{htmlFor:"Tome",className:"form-label",children:"Tome"}),Object(l.jsx)("input",{type:"number",className:"form-control",name:"Tome",value:n.Tome||"",onChange:c})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)("label",{htmlFor:"NbPages",className:"form-label",children:"Nb pages"}),Object(l.jsx)("input",{type:"number",className:"form-control",name:"NbPages",value:n.NbPages||"",onChange:c})]}),Object(l.jsx)("div",{className:"mb-3",children:Object(l.jsxs)("div",{className:"form-check form-switch",children:[Object(l.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault",checked:"Lu"===n.Statut,onChange:function(e){return c({target:{name:"Statut",value:"Lu"===n.Statut?"Non lu":"Lu"}})}}),Object(l.jsx)("label",{className:"form-check-label",htmlFor:"flexSwitchCheckDefault",children:n.Statut})]})}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)("label",{htmlFor:"Format",className:"form-label",children:"Format"}),Object(l.jsx)("div",{children:a.formats.map((function(e){return Object(l.jsxs)("div",{className:"form-check form-check-inline",children:[Object(l.jsx)("input",{className:"form-check-input",type:"radio",name:"Format",id:"radio-"+e,value:e,checked:n.Format===e,onChange:c}),Object(l.jsx)("label",{className:"form-check-label",htmlFor:"radio-"+e,children:e})]},e)}))})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)("label",{htmlFor:"Author",className:"form-label",children:"Auteur"}),Object(l.jsx)("input",{type:"text",className:"form-control",name:"Author",value:n.Author,onChange:c})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)("label",{htmlFor:"Genre",className:"form-label",children:"Genre"}),Object(l.jsxs)("select",{type:"text",className:"form-select",name:"Genre",value:n.Genre||"",onChange:c,children:[Object(l.jsx)("option",{value:"",children:"-"}),a.genres.map((function(e){return Object(l.jsx)("option",{value:e,children:e},e)}))]})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)("label",{htmlFor:"SousGenre",className:"form-label",children:"Sous-genre"}),Object(l.jsxs)("select",{type:"text",className:"form-select",name:"SousGenre",value:n.SousGenre||"",onChange:c,children:[Object(l.jsx)("option",{value:"",children:"-"}),a.sousGenres.map((function(e){return Object(l.jsx)("option",{value:e,children:e},e)}))]})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)("label",{htmlFor:"Description",className:"form-label",children:"R\xe9sum\xe9"}),Object(l.jsx)("textarea",{name:"Description",cols:"30",rows:"3",className:"form-control",value:n.Description,onChange:c})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)("label",{htmlFor:"Jacket",className:"form-label",children:"Jacket"}),Object(l.jsx)("input",{type:"text",className:"form-control",name:"Jacket",value:n.Jacket,onChange:c})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)("label",{htmlFor:"Commentaire",className:"form-label",children:"Commentaire"}),Object(l.jsx)("textarea",{name:"Commentaire",cols:"30",rows:"3",className:"form-control",value:n.Commentaire||"",onChange:c})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)("label",{htmlFor:"LentAt",className:"form-label",children:"Pr\xeat\xe9 \xe0"}),Object(l.jsx)("input",{type:"text",className:"form-control",name:"LentAt",value:n.LentAt||"",onChange:c})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)("label",{htmlFor:"LentOn",className:"form-label",children:"Pr\xeat\xe9 le"}),Object(l.jsx)("input",{type:"date",className:"form-control",name:"LentOn",value:n.LentOn||"",onChange:c})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)("label",{htmlFor:"LentReturnOn",className:"form-label",children:"Rendu le"}),Object(l.jsx)("input",{type:"date",className:"form-control",name:"LentReturnOn",value:n.LentReturnOn||"",onChange:c})]})]})},L=function(){var e=Object(i.f)(),t=Object(a.useState)(w.defaultState),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(w.defaultList),o=Object(d.a)(s,2),u=o[0],b=o[1];Object(a.useEffect)((function(){(function(){var e=Object(j.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=b,e.next=3,w.getLists();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var h=function(){var t=Object(j.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,w.addBook(c);case 3:e.replace("/");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(l.jsxs)("form",{style:{maxWidth:500,margin:"auto"},onSubmit:h,children:[Object(l.jsx)("h1",{className:"text-muted text-center",children:"Add"}),Object(l.jsx)(C,{props:{data:c,lists:u,handleChange:function(e){return r(Object(A.a)(Object(A.a)({},c),{},Object(S.a)({},e.target.name,e.target.value)))}}}),Object(l.jsx)("div",{className:"text-center",children:Object(l.jsx)("button",{className:"btn btn-primary",children:"Add"})})]})},B=function(){var e=Object(i.g)().rowIndex,t=Object(a.useState)(w.defaultState),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(w.defaultList),u=Object(d.a)(s,2),b=u[0],h=u[1],p=Object(a.useState)(0),f=Object(d.a)(p,2),x=f[0],O=f[1];Object(a.useEffect)((function(){var t=function(){var t=Object(j.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=r,t.next=3,w.getBook(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){var e=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h,e.next=3,w.getLists();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(j.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=O,e.next=3,w.getBookCount();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t(),a(),n()}),[e]);var v=function(){var t=Object(j.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault();try{w.saveBook(e,c)}catch(a){console.log(a)}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(l.jsxs)("form",{style:{maxWidth:500,margin:"auto"},onSubmit:v,children:[Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col",children:Object(l.jsx)(o.b,{to:"/edit/".concat(parseInt(e)-1),className:"btn btn-primary ".concat("0"===e?"disabled":""),children:"<<"})}),Object(l.jsx)("h1",{className:"col-8 text-muted text-center",children:"Modifier un livre"}),Object(l.jsx)("div",{className:"col",children:Object(l.jsx)(o.b,{to:"/edit/".concat(parseInt(e)+1),className:"btn btn-primary ".concat(parseInt(e)+1===x?"disabled":""),children:">>"})})]}),Object(l.jsx)(C,{props:{data:c,lists:b,handleChange:function(e){return r(Object(A.a)(Object(A.a)({},c),{},Object(S.a)({},e.target.name,e.target.value)))}}}),Object(l.jsx)("div",{className:"text-center",children:Object(l.jsx)("button",{className:"btn btn-primary",children:"Update"})})]})};var G=function(){return Object(l.jsxs)(o.a,{children:[Object(l.jsx)(u,{}),Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{exact:!0,path:"/",component:y}),Object(l.jsx)(i.a,{exact:!0,path:"/add",component:L}),Object(l.jsx)(i.a,{exact:!0,path:"/edit/:rowIndex",component:B})]})})]})};s.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(G,{})}),document.getElementById("root"))}},[[422,1,2]]]);
//# sourceMappingURL=main.ad08d21b.chunk.js.map